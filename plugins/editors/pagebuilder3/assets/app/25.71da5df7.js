webpackJsonppagefly([25],{742:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"default",function(){return w});var a=n(28),i=n.n(a),o=n(141),s=n.n(o),l=n(349),r=n.n(l),c=n(350),u=n.n(c),p=n(351),d=n.n(p),f=n(354),h=n.n(f),g=n(352),y=n.n(g),b=n(142),m=n(7),v=n.n(m),k=n(360),_=n(0),E=n.n(_),w=function(t){function e(){return r()(this,e),d()(this,(e.__proto__||s()(e)).apply(this,arguments))}return y()(e,t),u()(e,[{key:"componentDidUpdate",value:function(){this.lastEditingKey&&(Object(b.a)(this.DOMNode).find('li[data-edit="'+this.lastEditingKey+'"]').find('span[data-edit="value"]').focus(),this.lastEditingKey=null)}},{key:"keyDownHandler",value:function(t){switch(t.stopPropagation(),t.keyCode){case 9:t.target.hasAttribute("data-edit")&&t.preventDefault();break;case 8:0===t.target.innerText.trim().length&&t.preventDefault();break;case 13:t.preventDefault()}}},{key:"addProp",value:function(){var t=this;this.setState({props:i()({},this.state.props,{"":""})},function(){Object(b.a)(t.DOMNode).find("li").last().children("span").first().focus()})}},{key:"render",value:function(){var t=this;return v.a.createElement("li",{onKeyDown:this.keyDownHandler,style:{display:"block"}},v.a.createElement("label",{"data-edit":"rule",contentEditable:!0,dangerouslySetInnerHTML:{__html:this.state.selector},onInput:function(e){t.state.selector=e.target.innerText}})," {",v.a.createElement("ul",{style:{display:"block",padding:"0 0 0 2em",margin:"1em 0 0 0"}},b.b.chain(this.state.props).map(function(t,e){return{key:e,value:t}}).sortBy(function(t){return t.key?"0__"+t.key:"1"}).map(function(e){var n=e.key,a=e.value;return v.a.createElement("li",{key:n,"data-edit":n,style:{display:"block"}},v.a.createElement("span",{"data-edit":"key",style:{display:"inline-block",minHeight:"1em",minWidth:"1em"},contentEditable:!0,dangerouslySetInnerHTML:{__html:n},onKeyDown:function(e){switch(e.keyCode){case 9:e.preventDefault(),e.shiftKey?(Object(b.a)(e.target).parent().prev().find("span").last().focus(),e.target.innerText||t.setState({props:b.b.omit(t.state.props,"")})):Object(b.a)(e.target).siblings("span").focus(),t.lastEditingKey=n;break;case 13:e.preventDefault(),Object(b.a)(e.target).siblings("span").focus()}},onInput:function(e){var i=e.target.innerText;delete t.state.props[n],n=i,t.state.props[n]=a,""==n&&(Object(b.a)(e.target).parent().prev().find("span").last().focus(),t.setState({props:b.b.omit(t.state.props,"")}))},onFocus:function(e){t.page&&t.page.selectText(e.target)}})," : ",v.a.createElement("span",{"data-edit":"value",style:{display:"inline-block",minHeight:"1em",minWidth:"1em"},contentEditable:!0,dangerouslySetInnerHTML:{__html:a},onKeyDown:function(e){switch(e.keyCode){case 9:e.preventDefault(),e.shiftKey?Object(b.a)(e.target).siblings("span").focus():Object(b.a)(e.target).parent().next().find("span").first().focus();break;case 8:0===e.target.innerText.trim().length&&(e.preventDefault(),Object(b.a)(e.target).siblings("span").focus());break;case 13:e.preventDefault(),t.addProp()}},onInput:function(e){var a=e.target.innerText;t.state.props[n]=a},onFocus:function(e){t.page&&t.page.selectText(e.target)}}))}).value()),"}")}},{key:"toolbar",get:function(){return null}},{key:"inspector",get:function(){return{}}},{key:"isEmpty",get:function(){return!1}}],[{key:"parentTypes",get:function(){return["Style"]}},{key:"propTypes",get:function(){return i()({},h()(e.__proto__||s()(e),"propTypes",this),{selector:E.a.string,props:E.a.object})}},{key:"defaultProps",get:function(){return i()({},h()(e.__proto__||s()(e),"defaultProps",this),{selector:".class-selector",props:{color:"white",background:"black"}})}}]),e}(k.default)},793:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"default",function(){return M}),n.d(e,"Menu",function(){return P});var a,i,o=n(361),s=n.n(o),l=n(28),r=n.n(l),c=n(141),u=n.n(c),p=n(349),d=n.n(p),f=n(350),h=n.n(f),g=n(351),y=n.n(g),b=n(352),m=n.n(b),v=n(13),k=n.n(v),_=n(29),E=n.n(_),w=n(358),x=n(365),D=n(369),O=n(368),T=(n(367),n(377),n(144)),S=(n.n(T),s()(["\n\t& {\n\t\tposition: absolute;\n\t\tdisplay: flex;\n\t\tbackground: ",";\n\t\tpadding: 5px 0;\n\t\tbox-shadow: ",";\n\t\tborder-radius: 3px;\n\t\toverflow: hidden;\n\t\tz-index: 9999;\n\t}\n"],["\n\t& {\n\t\tposition: absolute;\n\t\tdisplay: flex;\n\t\tbackground: ",";\n\t\tpadding: 5px 0;\n\t\tbox-shadow: ",";\n\t\tborder-radius: 3px;\n\t\toverflow: hidden;\n\t\tz-index: 9999;\n\t}\n"])),M=(i=a=function(t){function e(){return d()(this,e),y()(this,(e.__proto__||u()(e)).apply(this,arguments))}return m()(e,t),h()(e,[{key:"componentWillMount",value:function(){this.setState({open:!1,collection:[],selected:null,target:null})}},{key:"componentDidMount",value:function(){this.listenTo(this.app,"resize",k.a.debounce(this.updatePosition))}},{key:"componentDidUpdate",value:function(t,e){this.updatePosition()}},{key:"updatePosition",value:function(){if(this.state.open&&this.state.target){var t=5,e=this.menuEl,n=this.state.target,a=E()(e).find("[data-selected]").get(0),i=this.get("scrollView.contentEl"),o=n.offsetWidth;if(a){a.scrollIntoView(),i.scrollTop-=i.offsetHeight/2;var s=a.getBoundingClientRect(),l=e.getBoundingClientRect();t=Math.round(s.top-l.top),this.state.searchable&&(t=0)}if(E()(e).css({minWidth:o-20,maxHeight:250}).position({my:"left top-"+t,at:"left top",of:this.state.target,collision:"fit",within:window}),a){var r=a.getBoundingClientRect(),c=n.getBoundingClientRect(),u=Math.round(c.top-r.top);u&&(i.scrollTop-=u)}}}},{key:"open",value:function(t){this.setState(r()({open:!0},t))}},{key:"close",value:function(t){this.setState(r()({collection:[],open:!1,selected:null,target:null},t))}},{key:"handleClickOutside",value:function(t){this.close(),this.state.onCancel&&this.state.onCancel()}},{key:"handleSelect",value:function(t){this.state.onSelect&&this.state.onSelect(t)}},{key:"render",value:function(){var t=this,e=this.state,n=e.open,a=e.collection,i=e.selected,o=e.mapping;return w.React.createElement(x.Overlay,{overlay:!0,hidden:!n,innerRef:function(e){return t.overlayEl=e},onMouseDown:this.handleClickOutside,style:{zIndex:20}},w.React.createElement(P,{innerRef:function(e){return t.menuEl=e},onMouseDown:function(t){return t.stopPropagation()}},w.React.createElement(D.default,{autoHeight:!0,ref:function(e){return t.scrollView=e}},w.React.createElement(O.default,{collection:a,selectable:!0,selected:i,onSelect:this.handleSelect,style:{padding:0}},function(t){return w.React.createElement(O.default.Item,{css:"\n\t\t\t\t\t\t\t\t\t\tpadding: 0 6px;\n\t\t\t\t\t\t\t\t\t\tmin-height: 24px;\n\t\t\t\t\t\t\t\t\t\tfont-size: 13px;\n\t\t\t\t\t\t\t\t\t\tfont-weight: 400;\n\t\t\t\t\t\t\t\t\t"},t.get(o.icon)?w.React.createElement("figure",null,w.React.createElement("i",{className:"icon "+t.get(o.icon)})):null,w.React.createElement("div",null,t.get(o?o.label:"label")))}))))}}]),e}(w.default),a.APP_POS="dialog",i),P=w.styled.div(S,function(t){return t.theme.button.bg},function(t){return t.theme.panel.shadow})}});